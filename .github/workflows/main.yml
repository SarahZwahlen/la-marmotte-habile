name : Main CI
run-name : ${{github.actor}} is running the main CI
on : 
  push :
    branches : [main]
  pull_request :
    branches : [main]
jobs : 
  setup_dependencies:
    runs-on : ubuntu-latest
    steps : 
      - uses : actions/checkout@v3
      - uses : ./.github/actions/common-step

  test-backend : 
    needs : setup_dependencies
    runs-on : ubuntu-latest
    steps : 
      - uses : actions/checkout@v3
      - uses : ./.github/actions/common-step
      - name : Run backend test
        run : yarn workspace back test
